<?php

namespace App\Models;

use CodeIgniter\Model;

class ModelPentest extends Model
{
   protected $table="pentest";
   protected $primarykey="id";
   protected $allowedFields =
   [
       'kd_pentest',
       'pemohon',
       'tanggal',
       'url_target',
       'nama_in',
       'p_jawab',
       'p_email',
       'p_no',
       'ip_addres',
       'status_hg',
       'h_high',
       'h_med',
       'h_low',
       'ket',
       'file_pdf',
       'pdf_data'
   ];

   public function cari($katakunci)
    {
       $builder = $this->table("tabelpentest");
       $arr_katakunci = explode(" ",$katakunci);
       for ($x=0;$x<count($arr_katakunci); $x++) {
         $builder->orLike('kd_pentest',$arr_katakunci[$x]);
         $builder->orLike('pemohon',$arr_katakunci[$x]);
         $builder->orLike('tanggal',$arr_katakunci[$x]);
         $builder->orLike('url_target',$arr_katakunci[$x]);
         $builder->orLike('nama_in',$arr_katakunci[$x]);
         $builder->orLike('p_jawab',$arr_katakunci[$x]);
         $builder->orLike('p_email',$arr_katakunci[$x]);
         $builder->orLike('p_no',$arr_katakunci[$x]);
         $builder->orLike('ip_addres',$arr_katakunci[$x]);
         $builder->orLike('status_hg',$arr_katakunci[$x]);
         $builder->orLike('h_high',$arr_katakunci[$x]);
         $builder->orLike('h_med',$arr_katakunci[$x]);
         $builder->orLike('h_low',$arr_katakunci[$x]);
         $builder->orLike('ket',$arr_katakunci[$x]);
       }
       return $builder;

    }

    public function updateData($id, $data)
    {
        // Logika update data
        $this->where('id', $id)->set($data)->update();

        // Mengembalikan hasil operasi
        return $this->affectedRows() > 0;
    }

    public function insertData($data)
    {
        // Logika insert data
        $this->insert($data);

        // Mengembalikan hasil operasi
        return $this->insertID();
    }

}